#### dbtest使用说明

1. 页面使用说明

   1. 登入程序首页，会响应转账测试页面
   2. 该页面功能设计为通过转账相关操作测试 **db** 分布式数据库对事务的支持
   3. 页面参数需正确输入，否则会响应 404(get请求)、405(post请求)
      1. 账号支持范围在 0~9223372036854775807 之间的整数
      2. 金额也为数字值且支持小数，金额需大于或等于0
      3. 批量次数为范围在 1~2147483647 之间的整数

2. 测试场景说明

   1. 卡对卡转账

      1. 如果输出的转出账号不存在，转账失败，转账事务回滚，trans_log 表中在转出账户分区会插入一条失败信息

      2. 如果输入的转入账号不存在，转账失败，转账事务回滚，trans_log 表中在转入账户分区会插入一条失败信息

      3. 如果转出账户余额不足，转账失败，转账事务回滚，trans_log 表中在转出账户分区会插入一条失败信息

      4. 如果以上条件都满足，则转账成功，

         factor1 表中的转出账户余额项扣减转账金额，转入账户余额项增加转账金额，

         trans_log 表中在转出账户分区插入一条转出成功信息，转入账户分区插入一条转入成功信息

   2. 一卡对两卡转账

      1. 如果输入的转出账号不存在，转账失败，转账事务回滚，trans_log 表中在转出账户分区插入一条失败信息

      2. 如果输入的转入账号不存在，转账失败，转账事务回滚，trans_log 表中在转入账户分区插入一条失败信息

      3. 如果转出账户余额不足，转账失败，转账事务回滚，trans_log 表中在转出账户分区插入一条失败信息

      4. 转账过程中如果有一个账户转账失败，则事务回滚

      5. 如果以上条件都满足，则转账成功

         factor1 表中的转出账户扣减转账金额，转入账户增加转账金额，

         trans_log表中在转出账户分区插入一条转出成功信息，转入账户分区插入一条转入成功信息

      6. 后台程序支持一卡对多卡转账，如果做接口测试时，转入账号参数为数组类型

   3. 生成一个新的账户

      1. 在进行转账操作时输入的账号不存在时，弹窗页面会提示是否创建该账户，

         如果选择确定会在 factor1 表中插入该账户信息，初始余额为 0.00，

         如果选择取消则不会执行创建账号操作

      2. factor1 表的主键是账号(card_no)，如果该账号存在，手动调用后台接口也无法插入该账户	

   4. 批量生成账户

      1. 批量个数为一次生成的账户个数，账号从输入的起始账号开始依次递增产生，初始余额为页面输入值
      2. 如果该次批量生成的账户中有一个账号已存在，则事务回滚，数据表中不会插入新的账户信息
      3. 如果执行成功则在 factor1 表中插入该批次的账户信息

   5. 批量转账

      1. 根据页面输入次数和金额执行转账批处理
      2. 转出卡号为页面输入的起始卡号依次递增，转入卡号为转出卡号加一
      3. 每笔转账各自执行自身转账事务成功时提交，失败时回滚

   6. 转账日志查询

      1. 如果前端未输入所查账号，则查询最新的1000条交易流水，以时间倒叙排列
      2. 如果只输入转出账号则查询该账号转出操作相关信息
      3. 如果只输入转入账号则查询该账号转入操作相关信息
      4. 如果转出转入账号都输入则查询对应账号下的交易数据